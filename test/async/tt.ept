open Iostream

node f() returns (c : bool; x : int on c)
let
  c = true;
  x = 0;
tel

unsafe node force1() returns ()
var ayy, ay : future int;
    ac : future bool;
let
  ayy = async 0 fby ay;
  (ac, ay) = async f();
  () = printf("%d", !ayy);
tel

node force2() returns (am : future int; ac : future bool)
var ay : future int;
let
  am = async 0 fby ay;
  (ac, ay) = async f();
tel


node mix() returns (y : int)
var ayy, ay : future int;
    ac : future bool;
let
  ayy = async 0 fby ay;
  (ac, ay) = async f();
  y = merge ac (!ayy) 42;
tel
